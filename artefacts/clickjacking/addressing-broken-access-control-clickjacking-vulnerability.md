# Addressing Broken Access Control (Clickjacking) Vulnerability (Documentation)

## Summary
This PR provides documentation for remediating the `A01 Broken Access Control` vulnerability, specifically addressing the missing `X-Frame-Options` header. This vulnerability exposes the OnTrack application to clickjacking attacks, which could lead to unauthorized actions and data leakage.

---

## Vulnerability Details

### Description
Clickjacking, also known as a User Interface redress attack, occurs when a malicious website tricks users into clicking on hidden elements of another site. The absence of the `X-Frame-Options` header allows the OnTrack application to be embedded in an iframe, making it vulnerable to clickjacking.

### Impact
- **Confidentiality**: None
- **Integrity**: Partial (e.g., unauthorised actions may be performed by users).
- **Availability**: None.

### Affected Paths
The following paths lack the secure `X-Frame-Options` header:
- `http://localhost:4200/`
- `http://localhost:4200/assets/icons/`
- `http://localhost:4200/sitemap.xml`
- `http://localhost:4200/clientaccesspolicy.xml`
- `http://localhost:4200/assets/fonts/`
- Other static assets under `http://localhost:4200/assets/...`.

---

## Remediation Plan

### Overview
The remediation involves:
1. Adding the `X-Frame-Options` header to HTTP responses.
2. Setting the header value to `DENY` to block the application from being embedded in any iframe.

### Implementation
- **File**: `doubtfire-web/nginx.conf`
- **Changes**:
  Add the following line to the `server` block:
  ```nginx
  add_header X-Frame-Options "DENY" always;
  ```

---

## Testing Plan

### Functional Testing
1. Verify that the `X-Frame-Options` header is present in all HTTP responses using the following command:
   ```bash
   curl -I http://localhost:4200/
   ```
   **Expected Output**:
   ```plaintext
   HTTP/1.1 200 OK
   X-Frame-Options: DENY
   ```
2. Ensure that the application continues to function normally after the changes.

### Security Testing
1. Create a test HTML page that attempts to embed the application in an iframe:
   ```html
   <iframe src="http://localhost:4200/" width="600" height="400"></iframe>
   ```
2. Open the test page in a browser and confirm the iframe is blocked.

### Regression Testing
1. Validate that adding the `X-Frame-Options` header does not affect existing functionality, such as asset loading and API responses.

---

## References
- [OWASP: Clickjacking](https://owasp.org/www-community/attacks/Clickjacking)
- [Mozilla Developer Network: X-Frame-Options](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Frame-Options)
